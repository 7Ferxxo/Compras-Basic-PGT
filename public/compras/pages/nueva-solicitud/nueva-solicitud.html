<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PGT - Nueva Solicitud</title>
    <link rel="icon" href="/favicon.ico" />
    <link rel="stylesheet" href="nueva-solicitud.css" />
  </head>
  <body data-page="nueva-solicitud" class="wizard-ready">
    <div class="app">
      <aside class="sidebar">
      </aside>

      <main class="main">
        <div class="topbar hero">
          <div class="title hero-title">
            <div class="muted hero-kicker">CREAR</div>
            <h1>Nueva solicitud</h1>
            <p>Crea una solicitud de compras y adjunta evidencias.</p>
            <div class="hero-steps">
              <div class="step-chip active" data-step="1"><span>1</span> Cliente</div>
              <div class="step-chip" data-step="2"><span>2</span> Pago</div>
              <div class="step-chip" data-step="3"><span>3</span> Evidencias</div>
              <div class="step-chip" data-step="4"><span>4</span> Confirmacion</div>
            </div>
          </div>
          <a class="btn ghost" href="../solicitudes-compra/solicitudes-compra.html">Cancelar</a>
        </div>

        <section class="grid">
          <form id="receiptForm" class="card request-card receipt-card" style="grid-column: span 12;">
            <div class="section section-hero" style="border-top:none;padding-top:0;margin-top:0;">
              <div class="section-title">Solicitud</div>
              <div id="receiptError" class="hint" style="display:none;"></div>
            </div>

            <div class="form-grid receipt-grid">
              <div class="col">
                <div class="section wizard-section" data-step="1">
                  <div class="section-title">Datos del Cliente</div>
                  <div class="row-3">
                    <div class="field" style="margin-top:0;">
                      <div class="label">Casillero</div>
                      <input id="rCasillero" placeholder="Casillero" />
                      <div id="rCasilleroStatus" class="muted" style="margin-top:6px;font-size:12px;"></div>
                    </div>
                    <div class="field" style="margin-top:0;">
                      <div class="label">Nombre</div>
                      <input id="rCliente" placeholder="Nombre" />
                    </div>
                    <div class="field" style="margin-top:0;">
                      <div class="label">Email del cliente</div>
                      <input id="rEmail" type="email" placeholder="cliente@correo.com" />
                    </div>
                  </div>
                  <div class="row-2">
                    <div class="field">
                      <div class="label">Fecha</div>
                      <input id="rFecha" type="date" />
                    </div>
                    <div class="field">
                      <div class="label">Sucursal</div>
                      <input id="rSucursal" type="hidden" />
                      <div class="select" id="rSucursalSelect">
                        <button type="button" class="select-toggle" id="rSucursalToggle" aria-expanded="false">
                          <span id="rSucursalLabel">Selecciona...</span>
                          <span class="chev" aria-hidden="true">▾</span>
                        </button>
                        <div class="select-panel" id="rSucursalPanel">
                          <div class="select-options" id="rSucursalOptions">
                            <button type="button" class="select-option" data-value="DAV">DAV</button>
                            <button type="button" class="select-option" data-value="WEST">WEST</button>
                            <button type="button" class="select-option" data-value="BGA">BGA</button>
                            <button type="button" class="select-option" data-value="TA">TA</button>
                            <button type="button" class="select-option" data-value="SF">SF</button>
                            <button type="button" class="select-option" data-value="CP">CP</button>
                            <button type="button" class="select-option" data-value="EAST">EAST</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="section wizard-section" data-step="2">
                  <div class="section-title">Pago</div>
                  <div class="field" style="margin-top: 0;">
                    <input id="rMetodoPago" type="hidden" />
                    <div class="muted helper-text">Selecciona el metodo de pago para calcular la comision.</div>
                    <div class="pay-grid" id="rPayGrid">
                      <div class="pay-option" role="button" tabindex="0" data-method="Transferencia">
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                          <path
                            d="M4 10h16M6 10V7l6-3 6 3v3M6 10v9m12-9v9M4 19h16"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                        <div class="t">Transferencia</div>
                      </div>
                      <div class="pay-option" role="button" tabindex="0" data-method="Yappy">
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                          <path
                            d="M8 7h8m-8 4h8m-8 4h6M7 3h10a2 2 0 0 1 2 2v14l-3-2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                        <div class="t">Yappy</div>
                      </div>
                      <div class="pay-option" role="button" tabindex="0" data-method="Efectivo">
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                          <path
                            d="M3 7h18v10H3V7Zm3 3h6m-6 4h4m7-4h2m-2 4h2"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                        <div class="t">Efectivo</div>
                      </div>
                      <div class="pay-option" role="button" tabindex="0" data-method="Tarjeta">
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                          <path
                            d="M3 7h18v10H3V7Zm0 3h18M7 14h4"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                        <div class="t">Tarjeta</div>
                      </div>
                    </div>
                  </div>

                  <input id="rTipoServicio" type="hidden" value="BASIC" />
                </div>

                <div class="section wizard-section" data-step="3">
                  <div class="section-title">Evidencias</div>
                  <div class="muted helper-text">Puedes pegar (Ctrl+V) o arrastrar archivos.</div>
                  <div class="dropzones">
                    <div class="dropzone" data-input="quoteScreenshots" role="button" tabindex="0">
                      <div class="dz-ico" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none">
                          <path
                            d="M12 3v10m0 0 4-4m-4 4-4-4M4 14v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          />
                        </svg>
                      </div>
                      <div class="dz-title">Capturas de cotizacion</div>
                      <div class="dz-sub" id="metaScreenshots">Pega (Ctrl+V) o doble click para seleccionar</div>
                      <input id="quoteScreenshots" class="dz-input" type="file" multiple />
                    </div>

                    <div class="dropzone" data-input="paymentProof" role="button" tabindex="0">
                      <div class="dz-ico" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none">
                          <path
                            d="M7 3h7l3 3v15a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linejoin="round"
                          />
                          <path d="M14 3v4h4" stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                          <path d="M8 12h8M8 16h6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                      </div>
                      <div class="dz-title">Comprobante</div>
                      <div class="dz-sub" id="metaPaymentProof">Pega (Ctrl+V) o doble click para seleccionar</div>
                      <input id="paymentProof" class="dz-input" type="file" />
                    </div>
                  </div>

                  <textarea id="pasteCatcher" class="paste-catcher" aria-hidden="true" tabindex="-1"></textarea>
                </div>
              </div>

              <div class="col">
                <div class="section wizard-section" data-step="2">
                  <div class="section-title">Detalle</div>
                  <div class="field" style="margin-top:0;">
                    <div class="label">Tienda</div>
                    <div class="muted helper-text">Selecciona la tienda para la solicitud.</div>
                    <input id="rStoreId" type="hidden" />
                    <div class="select" id="rStoreSelect">
                      <button type="button" class="select-toggle" id="rStoreToggle" aria-expanded="false">
                        <span id="rStoreLabel">Selecciona...</span>
                        <span class="chev" aria-hidden="true">▾</span>
                      </button>
                      <div class="select-panel" id="rStorePanel">
                        <div class="select-options" id="rStoreOptions"></div>
                      </div>
                    </div>
                  </div>
                  <div class="field" id="rStoreCustomWrap" style="display:none;">
                    <div class="label">Tienda (otros)</div>
                    <input id="rStoreCustomName" placeholder="Nombre de la tienda" />
                  </div>
                  <div class="field" style="margin-top:0;">
                    <div class="label">Descripcion</div>
                    <textarea id="rDescripcion" placeholder="Ej: información que desee añadir a la solicitud"></textarea>
                  </div>
                  <div class="row-2">
                    <div class="field">
                      <div class="label">Precio</div>
                      <input id="rPrecio" type="number" step="0.01" min="0" placeholder="0.00" />
                    </div>
                    <div class="field">
                      <div class="label">Link del producto</div>
                      <input id="rLinkProducto" type="url" placeholder="https://..." />
                    </div>
                  </div>

                  <div class="receipt-summary" style="margin-top: 12px;">
                    <div style="display:flex;justify-content:space-between;gap:12px;">
                      <span>comision</span>
                      <b id="rComision">B/. 0.00</b>
                    </div>
                    <div style="display:flex;justify-content:space-between;gap:12px;margin-top:6px;">
                      <span>Total</span>
                      <b id="rTotal">B/. 0.00</b>
                    </div>
                  </div>
                </div>
                              </div>
            </div>


            <div class="section wizard-section" data-step="4">
              <div class="section-title">Confirmacion</div>
              <div class="confirm-card">
                <div class="confirm-row"><span>Cliente</span><b id="sumCliente">-</b></div>
                <div class="confirm-row"><span>Casillero</span><b id="sumCasillero">-</b></div>
                <div class="confirm-row"><span>Email</span><b id="sumEmail">-</b></div>
                <div class="confirm-row"><span>Sucursal</span><b id="sumSucursal">-</b></div>
                <div class="confirm-row"><span>Fecha</span><b id="sumFecha">-</b></div>
                <div class="confirm-row"><span>Metodo de pago</span><b id="sumMetodo">-</b></div>
                <div class="confirm-row"><span>Precio</span><b id="sumPrecio">-</b></div>
                <div class="confirm-row"><span>Comision</span><b id="sumComision">-</b></div>
                <div class="confirm-row"><span>Total</span><b id="sumTotal">-</b></div>
                <div class="confirm-row"><span>Link</span><b id="sumLink">-</b></div>
                <div class="confirm-row"><span>Descripcion</span><b id="sumDesc">-</b></div>
                <div class="confirm-row"><span>Evidencias</span><b id="sumEvidencias">-</b></div>
              </div>
            </div>

            <div class="actionbar">
              <a class="btn" href="/dashboard">Historial de recibos</a>
              <div class="action-right wizard-actions">
                <button class="btn ghost" id="wizardBack" type="button">Atras</button>
                <button class="btn" id="wizardNext" type="button">Siguiente</button>
                <button class="btn cta" id="rSubmitBtn" type="submit">
                  <span class="btn-ico" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none">
                      <path
                        d="M7 3h7l3 3v15a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linejoin="round"
                      />
                      <path d="M14 3v4h4" stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                      <path d="M8 12h8M8 16h6" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                  </span>
                  Crear Solicitud
                </button>
              </div>
            </div>
          </form>
        </section>
      </main>
    </div>

    <script src="../../shared/layout.js"></script>
    <script src="../../shared/api.js"></script>
    <script src="nueva-solicitud.js"></script>
  </body>
</html>




